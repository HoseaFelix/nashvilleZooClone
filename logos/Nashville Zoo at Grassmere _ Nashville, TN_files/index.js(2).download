import{parse as o,isBefore as l,isAfter as p}from"https://cdn.skypack.dev/pin/date-fns@v2.27.0-kSwHFMsWRtnuspqyJxns/mode=imports,min/optimized/date-fns.js";var a=function(i){if(this.opts=i,this.opts.AlertActive&&this.opts.AlertStartDate&&this.opts.AlertEndDate){let t="yyyy'-'MM'-'dd'T'HH:mm:ss' 'X",e=o(this.opts.AlertStartDate,t,new Date),n=o(this.opts.AlertEndDate,t,new Date),r=new Date;e==r||l(e,r)&&p(n,r)?this.opts.AlertActive=!0:this.opts.AlertActive=!1}if(this.page_alert_wrapper=document.querySelector(".page-alert-wrapper"),this.page_alert=document.querySelector(".page-alert-message"),this.alert_states={NotViewed:0,Viewed:1},this.alert_dismiss_click=this.hideAlert,this.alert_dismiss_key=function(t){t.which==27&&this.hideAlert()},this.opts.AlertActive||this.setState(this.alert_states.NotViewed),this.opts.AlertActive&&(!this.hasBeenViewed()||this.opts.AlwaysShow))if(parseFloat(this.opts.Delay)){var s=this;setTimeout(function(){s.showAlert()},this.opts.Delay*1e3)}else this.showAlert()};a.prototype.getState=function(){for(var i="alert_state=",s=document.cookie.split(";"),t=0;t<s.length;t++){for(var e=s[t];e.charAt(0)==" ";)e=e.substring(1,e.length);if(e.indexOf(i)==0)return e.substring(i.length,e.length)}return null};a.prototype.hasBeenViewed=function(){return this.getState()==this.alert_states.Viewed};a.prototype.setState=function(i){var s=new Date;s.setTime(s.getTime()+365*24*60*60*1e3),document.cookie="alert_state="+i+"; expires="+s.toGMTString()+"; path=/"};a.prototype.hideAlert=function(){this.page_alert.setAttribute("style","display: none"),this.page_alert_wrapper.setAttribute("style","display: none"),document.body.removeEventListener("keyup",this.hideAlert)};a.prototype.showAlert=function(){this.setState(this.alert_states.Viewed);var i=this.page_alert_wrapper,s=document.createElement("div");s.className="controls";var t=document.createElement("input");t.id="page-alert-dismiss",t.value="Close",t.type="submit",s.append(t),this.page_alert.append(s),document.body.prepend(this.page_alert_wrapper),this.page_alert_wrapper.setAttribute("style","display: block;"),this.page_alert.setAttribute("style","display: block;"),document.body.prepend(this.page_alert);var e=document.getElementById("page-alert-dismiss");e!=null&&e.addEventListener("click",this.hideAlert.bind(this)),document.body.addEventListener("keyup",this.alert_dismiss_key.bind(this))};a.prototype.debug=function(){console!=null&&(console.log("IsActive: "+this.opts.AlertActive),console.log("HasBeenViewed: "+this.hasBeenViewed()),console.log("AlwaysShow: "+this.opts.AlwaysShow),console.log("CurrentState: "+this.getState()))};window.addEventListener("load",function(){new a(page_alert_options)});
//# sourceMappingURL=index.js.map
